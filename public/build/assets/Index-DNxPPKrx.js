import{k as W,C as O,c as n,a as o,b as u,u as g,g as q,w as c,d as e,j as f,t as a,h as E,q as D,F as x,e as b,y as S,i as d,S as h,n as T,f as G,W as $}from"./app-OAsktpdo.js";import{_ as I}from"./AppLayout-CrSf5v8z.js";const J={class:"flex justify-between items-center"},K={class:"py-6"},P={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Q={key:0,class:"mb-4 bg-green-100 border-l-4 border-green-500 text-green-700 p-4 rounded shadow-sm dark:bg-green-900 dark:text-green-100"},X={class:"flex"},Y={class:"ml-3"},Z={class:"text-sm"},ee={key:1,class:"mb-4 bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded shadow-sm dark:bg-red-900 dark:text-red-100"},te={class:"flex"},se={class:"ml-3"},re={class:"text-sm"},oe={class:"bg-white dark:bg-gray-800 shadow rounded-lg p-6 mb-6"},ne={class:"grid grid-cols-1 lg:grid-cols-4 gap-6"},ae={class:"lg:col-span-3"},le=["value"],de={class:"col-span-1"},ie={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},ue={class:"space-y-3"},ge={class:"flex justify-between items-center"},ce={class:"font-semibold text-gray-900 dark:text-white"},fe={class:"flex justify-between items-center"},he={class:"font-semibold text-green-600 dark:text-green-400"},ke={class:"flex justify-between items-center"},xe={class:"font-semibold text-yellow-600 dark:text-yellow-400"},me={class:"flex justify-between items-center"},be={class:"font-semibold text-gray-600 dark:text-gray-400"},ve={key:2},pe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ye={class:"p-5"},we={class:"flex justify-between items-start mb-4"},_e={class:"mt-1"},je={class:"mt-2 text-sm text-gray-500 dark:text-gray-400"},Me={key:0,class:"mb-2"},Ce={key:1,class:"mb-2"},Be={class:"flex items-center"},Ve={class:"bg-gray-50 dark:bg-gray-700 px-5 py-3 flex justify-between items-center"},ze={key:0,class:"text-xs font-medium text-gray-500 dark:text-gray-400"},Le={class:"flex space-x-2"},He=["onClick"],De={key:0,class:"mt-6"},Se={class:"flex flex-wrap justify-center"},Te={key:3,class:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg"},$e={class:"p-10 text-center"},Ue={class:"mt-6"},Ae={__name:"Index",props:{posts:{type:Object,default:()=>({data:[],links:[]})},channels:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({channel:"",status:""})},error:{type:String,default:null}},setup(m){const k=m,l=W(()=>k.posts?k.posts.links?k.posts:{...k.posts,links:[]}:{data:[],links:[]}),i=O({channel:k.filters.channel||"",status:k.filters.status||""});function v(){$.get(route("posts.index"),{channel:i.channel||void 0,status:i.status||void 0},{preserveState:!0,replace:!0,only:["posts"]})}function U(){i.channel="",i.status="",v()}function F(r){r&&confirm("Вы уверены, что хотите удалить этот пост?")&&$.delete(route("posts.destroy",r))}function N(r,t){return r.length>t?r.substring(0,t)+"...":r}function A(r){return r?new Date(r).toLocaleDateString("ru-RU"):""}function p(r){if(!r)return"";const t=new Date(r);return t.toLocaleDateString("ru-RU")+" "+t.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})}function R(r){return{draft:"Черновик",scheduled:"Запланирован",published:"Опубликован",failed:"Ошибка"}[r]||r}return(r,t)=>(o(),n(x,null,[u(g(q),{title:"Мои посты"}),u(I,null,{header:c(()=>[e("div",J,[t[3]||(t[3]=e("h2",{class:"text-xl font-semibold text-gray-800 dark:text-gray-200 leading-tight"}," Мои посты ",-1)),u(g(h),{href:r.route("posts.create"),class:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-500 active:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition ease-in-out duration-150"},{default:c(()=>t[2]||(t[2]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),d(" Создать пост ")])),_:1},8,["href"])])]),default:c(()=>{var y,w,_,j,M,C,B,V,z,L;return[e("div",K,[e("div",P,[(y=r.$page.props.flash)!=null&&y.success?(o(),n("div",Q,[e("div",X,[t[4]||(t[4]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Y,[e("p",Z,a(r.$page.props.flash.success),1)])])])):f("",!0),(w=r.$page.props.flash)!=null&&w.error||m.error?(o(),n("div",ee,[e("div",te,[t[5]||(t[5]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),e("div",se,[e("p",re,a(((_=r.$page.props.flash)==null?void 0:_.error)||m.error),1)])])])):f("",!0),e("div",oe,[e("div",ne,[e("div",ae,[t[11]||(t[11]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},"Фильтры",-1)),e("form",{onSubmit:E(v,["prevent"]),class:"space-y-4 md:space-y-0 md:grid md:grid-cols-3 md:gap-4"},[e("div",null,[t[7]||(t[7]=e("label",{for:"channel",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Канал",-1)),D(e("select",{id:"channel","onUpdate:modelValue":t[0]||(t[0]=s=>i.channel=s),class:"w-full rounded-md border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},[t[6]||(t[6]=e("option",{value:""},"Все каналы",-1)),(o(!0),n(x,null,b(m.channels,s=>(o(),n("option",{key:s.id,value:s.id},a(s.name),9,le))),128))],512),[[S,i.channel]])]),e("div",null,[t[9]||(t[9]=e("label",{for:"status",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Статус",-1)),D(e("select",{id:"status","onUpdate:modelValue":t[1]||(t[1]=s=>i.status=s),class:"w-full rounded-md border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},t[8]||(t[8]=[e("option",{value:""},"Все статусы",-1),e("option",{value:"draft"},"Черновик",-1),e("option",{value:"scheduled"},"Запланирован",-1),e("option",{value:"published"},"Опубликован",-1),e("option",{value:"failed"},"Ошибка",-1)]),512),[[S,i.status]])]),e("div",{class:"flex items-end space-x-2"},[t[10]||(t[10]=e("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800"},[e("svg",{class:"w-4 h-4 inline-block mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})]),d(" Применить ")],-1)),e("button",{type:"button",onClick:U,class:"px-4 py-2 bg-gray-200 text-gray-700 dark:bg-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-300 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2 dark:focus:ring-offset-gray-800"}," Сбросить ")])],32)]),e("div",de,[t[16]||(t[16]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},"Статистика",-1)),e("div",ie,[e("div",ue,[e("div",ge,[t[12]||(t[12]=e("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Всего постов:",-1)),e("span",ce,a(((j=l.value)==null?void 0:j.total)||0),1)]),e("div",fe,[t[13]||(t[13]=e("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Опубликовано:",-1)),e("span",he,a(((C=(M=l.value)==null?void 0:M.data)==null?void 0:C.filter(s=>s.status==="published").length)||0),1)]),e("div",ke,[t[14]||(t[14]=e("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Запланировано:",-1)),e("span",xe,a(((V=(B=l.value)==null?void 0:B.data)==null?void 0:V.filter(s=>s.status==="scheduled").length)||0),1)]),e("div",me,[t[15]||(t[15]=e("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"Черновики:",-1)),e("span",be,a(((L=(z=l.value)==null?void 0:z.data)==null?void 0:L.filter(s=>s.status==="draft").length)||0),1)])])])])])]),l.value&&l.value.data&&l.value.data.length>0?(o(),n("div",ve,[e("div",pe,[(o(!0),n(x,null,b(l.value.data,s=>(o(),n("div",{key:s.id,class:"bg-white dark:bg-gray-800 overflow-hidden shadow rounded-lg transition-all duration-200 hover:shadow-md hover:translate-y-[-2px]"},[e("div",ye,[e("div",we,[e("div",null,[u(g(h),{href:r.route("posts.show",s.id),class:"text-lg font-semibold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400"},{default:c(()=>[d(a(N(s.title||"Без названия",50)),1)]),_:2},1032,["href"]),e("div",_e,[u(g(h),{href:r.route("channels.show",s.channel.id),class:"text-sm text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400"},{default:c(()=>[t[17]||(t[17]=e("svg",{class:"w-4 h-4 inline-block mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2z"})],-1)),d(" "+a(s.channel.name),1)]),_:2},1032,["href"])])]),e("span",{class:T(["px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":s.status==="published","bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100":s.status==="scheduled","bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300":s.status==="draft","bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100":s.status==="failed"}])},a(R(s.status)),3)]),e("div",je,[s.scheduled_at&&s.status==="scheduled"?(o(),n("div",Me,[t[18]||(t[18]=e("svg",{class:"w-4 h-4 inline-block mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),d(" Запланирован на: "+a(p(s.scheduled_at)),1)])):f("",!0),s.published_at&&s.status==="published"?(o(),n("div",Ce,[t[19]||(t[19]=e("svg",{class:"w-4 h-4 inline-block mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),d(" Опубликован: "+a(p(s.published_at)),1)])):f("",!0),e("div",Be,[t[20]||(t[20]=e("svg",{class:"w-4 h-4 inline-block mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),d(" Создан: "+a(A(s.created_at)),1)])])]),e("div",Ve,[e("div",null,[s.status==="published"&&s.views_count!==void 0?(o(),n("div",ze,[t[21]||(t[21]=e("svg",{class:"w-4 h-4 inline-block mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)),d(" "+a(s.views_count||0)+" просмотров ",1)])):f("",!0)]),e("div",Le,[u(g(h),{href:r.route("posts.edit",s.id),class:"inline-flex items-center p-1.5 text-sm text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-900 rounded-md hover:bg-blue-200 dark:hover:bg-blue-800",title:"Редактировать"},{default:c(()=>t[22]||(t[22]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])),_:2},1032,["href"]),u(g(h),{href:r.route("posts.show",s.id),class:"inline-flex items-center p-1.5 text-sm text-green-600 dark:text-green-400 bg-green-100 dark:bg-green-900 rounded-md hover:bg-green-200 dark:hover:bg-green-800",title:"Просмотреть"},{default:c(()=>t[23]||(t[23]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])),_:2},1032,["href"]),e("button",{onClick:H=>F(s.id),class:"inline-flex items-center p-1.5 text-sm text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-900 rounded-md hover:bg-red-200 dark:hover:bg-red-800",title:"Удалить"},t[24]||(t[24]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,He)])])]))),128))]),l.value.links&&l.value.links.length>3?(o(),n("div",De,[e("div",Se,[(o(!0),n(x,null,b(l.value.links,(s,H)=>(o(),n(x,null,[s&&s.url!==null?(o(),G(g(h),{key:H,href:s.url,class:T([{"bg-blue-600 text-white":s.active,"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700":!s.active},"mx-1 px-4 py-2 rounded text-sm transition-colors duration-150"]),innerHTML:s.label},null,8,["href","class","innerHTML"])):f("",!0)],64))),256))])])):f("",!0)])):(o(),n("div",Te,[e("div",$e,[t[26]||(t[26]=e("div",{class:"flex justify-center"},[e("svg",{class:"h-20 w-20 text-gray-400 dark:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),t[27]||(t[27]=e("h3",{class:"mt-4 text-lg font-medium text-gray-900 dark:text-gray-100"},"Постов не найдено",-1)),t[28]||(t[28]=e("p",{class:"mt-2 text-gray-500 dark:text-gray-400 max-w-md mx-auto"}," У вас пока нет постов или по выбранным параметрам фильтрации ничего не найдено. ",-1)),e("div",Ue,[u(g(h),{href:r.route("posts.create"),class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800"},{default:c(()=>t[25]||(t[25]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),d(" Создать первый пост ")])),_:1},8,["href"])])])]))])])]}),_:1})],64))}};export{Ae as default};
