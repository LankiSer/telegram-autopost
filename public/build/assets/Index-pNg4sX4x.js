import{x as g,c as i,a as d,b as x,u as v,g as _,w as m,d as e,j as u,t as n,i as l,h,F as f,e as S,n as a}from"./app-BvKMgCPM.js";import{_ as $}from"./AppLayout-CPl3rLGK.js";const j={class:"py-6"},B={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},C={key:0,class:"mb-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative",role:"alert"},M={class:"block sm:inline"},L={key:1,class:"mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert"},F={class:"block sm:inline"},N={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg p-6 mb-6"},D={key:0,class:"bg-blue-50 dark:bg-blue-900 p-4 rounded-lg"},V={class:"flex flex-col md:flex-row md:items-center justify-between"},T={class:"text-xl font-bold text-blue-800 dark:text-blue-200"},z={class:"text-blue-700 dark:text-blue-300 mt-1"},A={class:"mt-2"},E={class:"text-blue-700 dark:text-blue-300"},I={class:"text-blue-700 dark:text-blue-300"},O={class:"text-blue-700 dark:text-blue-300"},P={class:"text-blue-700 dark:text-blue-300"},R={class:"mt-4 md:mt-0"},U={key:1,class:"bg-yellow-50 dark:bg-yellow-900 p-4 rounded-lg"},q={key:2,class:"bg-red-50 dark:bg-red-900 p-4 rounded-lg mb-6"},G={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg p-6"},H={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},J={class:"p-4"},K={class:"text-gray-700 dark:text-gray-300 mb-3"},Q={class:"space-y-2"},W={class:"flex items-center text-gray-700 dark:text-gray-300"},X={class:"flex items-center text-gray-700 dark:text-gray-300"},Y={class:"flex items-center text-gray-700 dark:text-gray-300"},Z={key:0,class:"w-5 h-5 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ee={key:1,class:"w-5 h-5 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},te={class:"flex items-center text-gray-700 dark:text-gray-300"},se={key:0,class:"w-5 h-5 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},re={key:1,class:"w-5 h-5 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},oe={class:"mt-6"},ne=["onSubmit"],ie={key:1,disabled:"",class:"w-full px-4 py-2 bg-green-300 text-green-700 rounded opacity-70 cursor-not-allowed"},ue={__name:"Index",props:{plans:{type:Array,default:()=>[]},currentSubscription:{type:Object,default:null}},setup(r){const c=g({plan_id:null}),k=g({});function p(o){c.plan_id=o,c.post(route("subscription.subscribe"))}function y(){confirm("Вы уверены, что хотите отменить текущую подписку?")&&k.post(route("subscription.cancel"))}function w(o){return o?new Date(o).toLocaleDateString("ru-RU",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Бессрочно"}function b(o,t){const s=[2,0,1,1,1,2];return t[o%100>4&&o%100<20?2:s[o%10<5?o%10:5]]}return(o,t)=>(d(),i(f,null,[x(v(_),{title:"Тарифы"}),x($,null,{header:m(()=>t[0]||(t[0]=[e("div",{class:"flex justify-between items-center"},[e("h2",{class:"text-xl font-semibold text-gray-800 dark:text-gray-200 leading-tight"}," Тарифы и подписки ")],-1)])),default:m(()=>[e("div",j,[e("div",B,[o.$page.props.flash&&o.$page.props.flash.success?(d(),i("div",C,[e("span",M,n(o.$page.props.flash.success),1)])):u("",!0),o.$page.props.flash&&o.$page.props.flash.error?(d(),i("div",L,[e("span",F,n(o.$page.props.flash.error),1)])):u("",!0),e("div",N,[t[7]||(t[7]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},"Ваша текущая подписка",-1)),r.currentSubscription?(d(),i("div",D,[e("div",V,[e("div",null,[e("h4",T,n(r.currentSubscription.name),1),e("p",z,"Активна до: "+n(w(r.currentSubscription.ends_at)||"Бессрочно"),1),e("div",A,[e("p",E,[t[1]||(t[1]=e("span",{class:"font-semibold"},"Лимит каналов:",-1)),l(" "+n(r.currentSubscription.channel_limit),1)]),e("p",I,[t[2]||(t[2]=e("span",{class:"font-semibold"},"Постов в месяц:",-1)),l(" "+n(r.currentSubscription.posts_per_month),1)]),e("p",O,[t[3]||(t[3]=e("span",{class:"font-semibold"},"Планирование постов:",-1)),l(" "+n(r.currentSubscription.scheduling_enabled?"Доступно":"Недоступно"),1)]),e("p",P,[t[4]||(t[4]=e("span",{class:"font-semibold"},"Аналитика:",-1)),l(" "+n(r.currentSubscription.analytics_enabled?"Доступна":"Недоступна"),1)])])]),e("div",R,[e("form",{onSubmit:h(y,["prevent"])},t[5]||(t[5]=[e("button",{type:"submit",class:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"}," Отменить подписку ",-1)]),32)])])])):(d(),i("div",U,t[6]||(t[6]=[e("p",{class:"text-yellow-700 dark:text-yellow-300"}," У вас нет активной подписки. Выберите тарифный план ниже. ",-1)])))]),r.plans.length===0?(d(),i("div",q,t[8]||(t[8]=[e("p",{class:"text-red-700 dark:text-red-300"}," Тарифные планы не загружены. Пожалуйста, обратитесь к администратору. ",-1)]))):u("",!0),e("div",G,[t[15]||(t[15]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},"Доступные тарифы",-1)),e("div",H,[(d(!0),i(f,null,S(r.plans,s=>(d(),i("div",{key:s.id,class:a(["border rounded-lg overflow-hidden",r.currentSubscription&&r.currentSubscription.plan_id===s.id?"border-green-500 dark:border-green-700 shadow-md":s.price>0?"border-blue-500 dark:border-blue-700 shadow-md":"border-gray-200 dark:border-gray-700"])},[e("div",{class:a(["p-4",r.currentSubscription&&r.currentSubscription.plan_id===s.id?"bg-green-500 dark:bg-green-700":s.price>0?"bg-blue-500 dark:bg-blue-700":"bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700"])},[e("h4",{class:a(["text-lg font-bold",[r.currentSubscription&&r.currentSubscription.plan_id===s.id||s.price>0?"text-white":"text-gray-900 dark:text-white"]])},n(s.name),3),e("p",{class:a(["text-2xl font-bold mt-2",[r.currentSubscription&&r.currentSubscription.plan_id===s.id||s.price>0?"text-white":"text-gray-900 dark:text-white"]])},n(s.price>0?`${s.price} ₽/мес`:"Бесплатно"),3)],2),e("div",J,[e("p",K,n(s.description),1),e("ul",Q,[e("li",W,[t[9]||(t[9]=e("svg",{class:"w-5 h-5 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),l(" "+n(s.channel_limit>100?"Неограниченное количество каналов":`До ${s.channel_limit} ${b(s.channel_limit,["канала","каналов","каналов"])}`),1)]),e("li",X,[t[10]||(t[10]=e("svg",{class:"w-5 h-5 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),l(" "+n(s.posts_per_month>1e3?"Неограниченное количество постов":`До ${s.posts_per_month} ${b(s.posts_per_month,["поста","постов","постов"])} в месяц`),1)]),e("li",Y,[s.scheduling_enabled?(d(),i("svg",Z,t[11]||(t[11]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)]))):(d(),i("svg",ee,t[12]||(t[12]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)]))),l(" "+n(s.scheduling_enabled?"Планирование постов":"Нет планирования постов"),1)]),e("li",te,[s.analytics_enabled?(d(),i("svg",se,t[13]||(t[13]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)]))):(d(),i("svg",re,t[14]||(t[14]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)]))),l(" "+n(s.analytics_enabled?"Расширенная аналитика":"Базовая аналитика"),1)])]),e("div",oe,[!r.currentSubscription||r.currentSubscription.plan_id!==s.id?(d(),i("form",{key:0,onSubmit:h(de=>p(s.id),["prevent"])},[e("button",{type:"submit",class:a(["w-full px-4 py-2 rounded focus:outline-none focus:ring-2 focus:ring-offset-2",s.price>0?"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500":"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500"])}," Выбрать тариф ",2)],40,ne)):(d(),i("button",ie," Текущий тариф "))])])],2))),128))])])])])]),_:1})],64))}};export{ue as default};
