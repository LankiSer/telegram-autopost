import{k as $,c as n,a as o,b as c,u as g,g as V,w as l,d as e,j as d,t as a,S as h,i,n as E,F as k,e as N,f as D,W as y}from"./app-OAsktpdo.js";import{_ as H}from"./AppLayout-CrSf5v8z.js";const U={class:"flex justify-between items-center"},z={class:"flex space-x-2"},A={class:"py-6"},T={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},F={key:0,class:"mb-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative"},R={key:1,class:"mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative"},W={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg p-6 mb-6"},I={class:"flex items-center"},O={class:"w-12 h-12 rounded-full flex items-center justify-center bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 text-lg font-bold mr-4"},q={class:"text-lg font-semibold text-gray-900 dark:text-white"},G={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg mb-6"},J={class:"bg-gray-50 dark:bg-gray-900 px-6 py-4 border-b border-gray-200 dark:border-gray-700"},K={class:"flex flex-wrap gap-4 items-center"},Q={class:"text-sm text-gray-500 dark:text-gray-400"},X={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},Y={key:1,class:"text-sm text-gray-500 dark:text-gray-400"},Z={key:2,class:"bg-red-50 dark:bg-red-900 p-2 rounded text-sm text-red-800 dark:text-red-300 w-full mt-2"},P={class:"p-6"},_={class:"prose dark:prose-invert max-w-none"},ee={class:"whitespace-pre-wrap"},te={key:0,class:"mt-6"},se={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"},re=["href"],oe=["src"],ne={key:1,class:"w-full h-40 bg-gray-100 dark:bg-gray-700 flex items-center justify-center"},ae={class:"p-2 text-sm text-gray-700 dark:text-gray-300 truncate"},ie={class:"flex justify-between"},ue={__name:"Show",props:{post:Object},setup(r){const f=r,v=$(()=>["draft","scheduled","failed","pending"].includes(f.post.status));function w(s,t){return s?s.length>t?s.substring(0,t)+"...":s:""}function b(s){return s?new Date(s).toLocaleString("ru-RU",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):""}function j(s){return{draft:"Черновик",scheduled:"Запланирован",published:"Опубликован",failed:"Ошибка",pending:"В очереди"}[s]||s}function M(){confirm("Вы уверены, что хотите удалить этот пост?")&&y.delete(route("posts.destroy",f.post.id))}function C(){confirm("Вы уверены, что хотите опубликовать этот пост сейчас?")&&y.post(route("posts.publish",f.post.id))}function m(s){try{return s?`/storage/${s}`:""}catch(t){return console.error("Error getting media URL:",t),""}}function B(s){try{return s?s.split("/").pop():"Файл"}catch(t){return console.error("Error getting media name:",t),"Файл"}}function L(s){try{if(!s)return!1;const t=s.split(".").pop().toLowerCase();return["jpg","jpeg","png","gif","webp","svg"].includes(t)}catch(t){return console.error("Error checking if media is image:",t),!1}}return(s,t)=>(o(),n(k,null,[c(g(V),{title:`Пост: ${w(r.post.content,30)}`},null,8,["title"]),c(H,null,{header:l(()=>[e("div",U,[t[2]||(t[2]=e("h2",{class:"text-xl font-semibold text-gray-800 dark:text-gray-200 leading-tight"}," Просмотр поста ",-1)),e("div",z,[v.value?(o(),D(g(h),{key:0,href:s.route("posts.edit",r.post.id),class:"inline-flex items-center px-3 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-500 active:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:l(()=>t[0]||(t[0]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),i(" Редактировать ")])),_:1},8,["href"])):d("",!0),c(g(h),{href:s.route("posts.index"),class:"inline-flex items-center px-3 py-2 bg-gray-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-500 active:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:l(()=>t[1]||(t[1]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})],-1),i(" К списку ")])),_:1},8,["href"])])])]),default:l(()=>{var p,x;return[e("div",A,[e("div",T,[(p=s.$page.props.flash)!=null&&p.success?(o(),n("div",F,a(s.$page.props.flash.success),1)):d("",!0),(x=s.$page.props.flash)!=null&&x.error?(o(),n("div",R,a(s.$page.props.flash.error),1)):d("",!0),e("div",W,[e("div",I,[e("div",O,a(r.post.channel.name.charAt(0).toUpperCase()),1),e("div",null,[e("h3",q,a(r.post.channel.name),1),c(g(h),{href:s.route("channels.show",r.post.channel.id),class:"text-sm text-blue-600 dark:text-blue-400 hover:underline"},{default:l(()=>t[3]||(t[3]=[i(" Перейти к каналу ")])),_:1},8,["href"])])])]),e("div",G,[e("div",J,[e("div",K,[e("div",null,[e("span",{class:E(["px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":r.post.status==="published","bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100":r.post.status==="scheduled","bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300":r.post.status==="draft","bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100":r.post.status==="failed"}])},a(j(r.post.status)),3)]),e("div",Q,[t[4]||(t[4]=e("span",{class:"font-semibold"},"Создан:",-1)),i(" "+a(b(r.post.created_at)),1)]),r.post.published_at?(o(),n("div",X,[t[5]||(t[5]=e("span",{class:"font-semibold"},"Опубликован:",-1)),i(" "+a(b(r.post.published_at)),1)])):d("",!0),r.post.scheduled_at&&r.post.status==="scheduled"?(o(),n("div",Y,[t[6]||(t[6]=e("span",{class:"font-semibold"},"Запланирован на:",-1)),i(" "+a(b(r.post.scheduled_at)),1)])):d("",!0),r.post.error_message?(o(),n("div",Z,[t[7]||(t[7]=e("span",{class:"font-semibold"},"Ошибка:",-1)),i(" "+a(r.post.error_message),1)])):d("",!0)])]),e("div",P,[e("div",_,[e("div",ee,a(r.post.content),1)]),r.post.media&&r.post.media.length>0?(o(),n("div",te,[t[9]||(t[9]=e("h4",{class:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Медиафайлы:",-1)),e("div",se,[(o(!0),n(k,null,N(r.post.media,(u,S)=>(o(),n("div",{key:S,class:"overflow-hidden rounded-lg border border-gray-200 dark:border-gray-700"},[e("a",{href:m(u),target:"_blank",class:"block"},[L(u)?(o(),n("img",{key:0,src:m(u),alt:"Media preview",class:"w-full h-40 object-cover"},null,8,oe)):(o(),n("div",ne,t[8]||(t[8]=[e("svg",{class:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1)]))),e("div",ae,a(B(u)),1)],8,re)]))),128))])])):d("",!0)])]),e("div",ie,[r.post.status==="draft"||r.post.status==="scheduled"||r.post.status==="failed"?(o(),n("button",{key:0,onClick:C,class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-500 active:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition ease-in-out duration-150"},[t[10]||(t[10]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),i(" "+a(r.post.status==="scheduled"?"Опубликовать сейчас":"Опубликовать"),1)])):d("",!0),e("button",{onClick:M,class:"inline-flex items-center px-4 py-2 bg-red-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-500 active:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition ease-in-out duration-150"},t[11]||(t[11]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),i(" Удалить пост ")]))])])])]}),_:1})],64))}};export{ue as default};
