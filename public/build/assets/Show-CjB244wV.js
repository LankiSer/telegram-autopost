import{c as f,a as c,b as h,u as v,g as R,w as x,d as e,j as C,t as l,S as w,i as k,F as j,e as H,n as Y}from"./app-BvKMgCPM.js";import{_ as E}from"./AppLayout-CPl3rLGK.js";import{r as p,t as u,a as B,g as L,l as $,b as I,c as F}from"./index-USOJQpr8.js";function D(r,n){p(2,arguments);var o=u(r),d=u(n),g=o.getTime()-d.getTime();return g<0?-1:g>0?1:g}function P(r,n){p(2,arguments);var o=u(r),d=u(n),g=o.getFullYear()-d.getFullYear(),s=o.getMonth()-d.getMonth();return g*12+s}function U(r,n){return p(2,arguments),u(r).getTime()-u(n).getTime()}var W={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(n){return n<0?Math.ceil(n):Math.floor(n)}},q="trunc";function G(r){return W[q]}function J(r){p(1,arguments);var n=u(r);return n.setHours(23,59,59,999),n}function K(r){p(1,arguments);var n=u(r),o=n.getMonth();return n.setFullYear(n.getFullYear(),o+1,0),n.setHours(23,59,59,999),n}function Q(r){p(1,arguments);var n=u(r);return J(n).getTime()===K(n).getTime()}function Z(r,n){p(2,arguments);var o=u(r),d=u(n),g=D(o,d),s=Math.abs(P(o,d)),t;if(s<1)t=0;else{o.getMonth()===1&&o.getDate()>27&&o.setDate(30),o.setMonth(o.getMonth()-g*s);var a=D(o,d)===-g;Q(u(r))&&s===1&&D(r,d)===1&&(a=!1),t=g*(s-Number(a))}return t===0?0:t}function ee(r,n,o){p(2,arguments);var d=U(r,n)/1e3;return G()(d)}function te(r){return B({},r)}var O=1440,re=2520,S=43200,se=86400;function ne(r,n,o){var d,g;p(2,arguments);var s=L(),t=(d=(g=o==null?void 0:o.locale)!==null&&g!==void 0?g:s.locale)!==null&&d!==void 0?d:$;if(!t.formatDistance)throw new RangeError("locale must contain formatDistance property");var a=D(r,n);if(isNaN(a))throw new RangeError("Invalid time value");var i=B(te(o),{addSuffix:!!(o!=null&&o.addSuffix),comparison:a}),M,_;a>0?(M=u(n),_=u(r)):(M=u(r),_=u(n));var y=ee(_,M),V=(I(_)-I(M))/1e3,m=Math.round((y-V)/60),b;if(m<2)return o!=null&&o.includeSeconds?y<5?t.formatDistance("lessThanXSeconds",5,i):y<10?t.formatDistance("lessThanXSeconds",10,i):y<20?t.formatDistance("lessThanXSeconds",20,i):y<40?t.formatDistance("halfAMinute",0,i):y<60?t.formatDistance("lessThanXMinutes",1,i):t.formatDistance("xMinutes",1,i):m===0?t.formatDistance("lessThanXMinutes",1,i):t.formatDistance("xMinutes",m,i);if(m<45)return t.formatDistance("xMinutes",m,i);if(m<90)return t.formatDistance("aboutXHours",1,i);if(m<O){var X=Math.round(m/60);return t.formatDistance("aboutXHours",X,i)}else{if(m<re)return t.formatDistance("xDays",1,i);if(m<S){var z=Math.round(m/O);return t.formatDistance("xDays",z,i)}else if(m<se)return b=Math.round(m/S),t.formatDistance("aboutXMonths",b,i)}if(b=Z(_,M),b<12){var A=Math.round(m/S);return t.formatDistance("xMonths",A,i)}else{var N=b%12,T=Math.floor(b/12);return N<3?t.formatDistance("aboutXYears",T,i):N<9?t.formatDistance("overXYears",T,i):t.formatDistance("almostXYears",T+1,i)}}function oe(r,n){return p(1,arguments),ne(r,Date.now(),n)}const ae={class:"flex justify-between items-center"},ie={class:"flex items-center"},de={class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},le={class:"flex space-x-3"},ue={class:"py-6"},ge={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},fe={key:0,class:"mb-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative"},ce={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},me={class:"col-span-1 md:col-span-2"},he={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},xe={class:"p-6"},ve={class:"mb-6"},we={class:"text-gray-800 dark:text-gray-200"},pe={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"},ke={class:"list-disc list-inside text-gray-800 dark:text-gray-200 ml-2"},ye={class:"list-disc list-inside text-gray-800 dark:text-gray-200 ml-2"},be={key:0},Me={class:"ml-1 text-sm text-gray-600 dark:text-gray-400"},_e={key:1},De={class:"flex flex-wrap gap-3"},Te={class:"col-span-1"},je={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},Se={class:"p-6"},Ne={class:"flex justify-between items-center mb-4"},Ce={key:0},He={class:"divide-y divide-gray-200 dark:divide-gray-700"},Ie={class:"flex items-center justify-between"},Oe={class:"flex items-center"},Be={class:"flex-shrink-0 bg-gray-300 dark:bg-gray-600 rounded-full h-10 w-10 flex items-center justify-center"},Ve={key:0,class:"text-lg font-medium text-gray-700 dark:text-gray-300"},Xe=["src","alt"],ze={class:"ml-3"},Ae={class:"text-sm font-medium text-gray-900 dark:text-gray-100"},Re={class:"text-sm text-gray-500 dark:text-gray-400"},Ye={key:1,class:"py-4 text-center text-gray-500 dark:text-gray-400"},Ee={class:"mt-6 bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},Le={class:"p-6"},$e={key:0},Fe={class:"divide-y divide-gray-200 dark:divide-gray-700"},Pe={class:"flex justify-between"},Ue={class:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate"},We={class:"text-xs text-gray-500 dark:text-gray-400"},qe={class:"text-sm text-gray-500 dark:text-gray-400 truncate"},Ge={class:"mt-1 flex items-center"},Je={key:0,class:"ml-2 inline-flex items-center text-xs text-gray-500 dark:text-gray-400"},Ke={class:"mt-3 text-center"},Qe={key:1,class:"py-4 text-center text-gray-500 dark:text-gray-400"},rt={__name:"Show",props:{group:Object,recentPosts:Array},setup(r){const n=s=>{try{const t=new Date(s);return oe(t,{addSuffix:!0,locale:F})}catch{return s}},o=(s,t)=>s?s.length>t?s.substring(0,t)+"...":s:"",d=s=>{switch(s){case"published":return"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100";case"pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100";case"rejected":return"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100";case"draft":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},g=s=>{switch(s){case"published":return"Опубликован";case"pending":return"На модерации";case"rejected":return"Отклонен";case"draft":return"Черновик";default:return"Неизвестно"}};return(s,t)=>(c(),f(j,null,[h(v(R),{title:r.group.name},null,8,["title"]),h(E,null,{header:x(()=>[e("div",ae,[e("div",ie,[h(v(w),{href:s.route("groups.index"),class:"mr-2 text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300"},{default:x(()=>t[0]||(t[0]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])),_:1},8,["href"]),e("h2",de,l(r.group.name),1)]),e("div",le,[h(v(w),{href:s.route("groups.edit",r.group.id),class:"inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-700 focus:bg-indigo-700 active:bg-indigo-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:x(()=>t[1]||(t[1]=[e("svg",{class:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),k(" Редактировать ")])),_:1},8,["href"]),h(v(w),{href:s.route("groups.moderation",r.group.id),class:"inline-flex items-center px-4 py-2 bg-gray-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:x(()=>t[2]||(t[2]=[e("svg",{class:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),k(" Модерация ")])),_:1},8,["href"])])])]),default:x(()=>[e("div",ue,[e("div",ge,[s.$page.props.flash.success?(c(),f("div",fe,l(s.$page.props.flash.success),1)):C("",!0),e("div",ce,[e("div",me,[e("div",he,[e("div",xe,[t[11]||(t[11]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4"},"Информация о группе",-1)),e("div",ve,[t[3]||(t[3]=e("h4",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1"},"Описание",-1)),e("p",we,l(r.group.description||"Нет описания"),1)]),e("div",pe,[e("div",null,[t[4]||(t[4]=e("h4",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1"},"Настройки публикации",-1)),e("ul",ke,[e("li",null,"Автоматическая публикация: "+l(r.group.auto_publish?"Включена":"Выключена"),1),e("li",null,"Использовать подпись: "+l(r.group.use_signature?"Да":"Нет"),1)])]),e("div",null,[t[6]||(t[6]=e("h4",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1"},"Настройки модерации",-1)),e("ul",ye,[e("li",null,"Модерация: "+l(r.group.moderation_enabled?"Включена":"Выключена"),1),e("li",null,"Авто-одобрение: "+l(r.group.auto_approve?"Включено":"Выключено"),1),r.group.restricted_words?(c(),f("li",be,[t[5]||(t[5]=e("span",null,"Запрещенные слова:",-1)),e("span",Me,l(r.group.restricted_words),1)])):(c(),f("li",_e,"Запрещенные слова: Не указаны"))])])]),e("div",null,[t[10]||(t[10]=e("h4",{class:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3"},"Действия",-1)),e("div",De,[h(v(w),{href:s.route("groups.new-post",r.group.id),class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 focus:bg-green-700 active:bg-green-900 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:x(()=>t[7]||(t[7]=[e("svg",{class:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),k(" Создать пост ")])),_:1},8,["href"]),h(v(w),{href:s.route("groups.stats",r.group.id),class:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700 focus:bg-blue-700 active:bg-blue-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:x(()=>t[8]||(t[8]=[e("svg",{class:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),k(" Статистика ")])),_:1},8,["href"]),h(v(w),{href:s.route("groups.posts",r.group.id),class:"inline-flex items-center px-4 py-2 bg-purple-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-purple-700 focus:bg-purple-700 active:bg-purple-900 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:x(()=>t[9]||(t[9]=[e("svg",{class:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1),k(" История постов ")])),_:1},8,["href"])])])])])]),e("div",Te,[e("div",je,[e("div",Se,[e("div",Ne,[t[13]||(t[13]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"},"Каналы в группе",-1)),h(v(w),{href:s.route("groups.channels.manage",r.group.id),class:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300"},{default:x(()=>t[12]||(t[12]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)])),_:1},8,["href"])]),r.group.channels&&r.group.channels.length>0?(c(),f("div",Ce,[e("ul",He,[(c(!0),f(j,null,H(r.group.channels,a=>(c(),f("li",{key:a.id,class:"py-3"},[e("div",Ie,[e("div",Oe,[e("div",Be,[a.photo_url?(c(),f("img",{key:1,src:a.photo_url,class:"h-10 w-10 rounded-full",alt:a.title},null,8,Xe)):(c(),f("span",Ve,l(a.title.charAt(0)),1))]),e("div",ze,[e("p",Ae,l(a.title),1),e("p",Re,"@"+l(a.username),1)])]),e("div",null,[h(v(w),{href:s.route("channels.show",a.id),class:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300"},{default:x(()=>t[14]||(t[14]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])),_:2},1032,["href"])])])]))),128))])])):(c(),f("div",Ye,[t[16]||(t[16]=e("p",{class:"mb-2"},"В группе пока нет каналов",-1)),h(v(w),{href:s.route("groups.channels.manage",r.group.id),class:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-indigo-600 bg-indigo-100 border border-transparent rounded-md hover:bg-indigo-200 dark:bg-indigo-900 dark:text-indigo-300 dark:hover:bg-indigo-800"},{default:x(()=>t[15]||(t[15]=[e("svg",{class:"mr-1 w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),k(" Добавить каналы ")])),_:1},8,["href"])]))])]),e("div",Ee,[e("div",Le,[t[20]||(t[20]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4"},"Последние посты",-1)),r.recentPosts&&r.recentPosts.length>0?(c(),f("div",$e,[e("ul",Fe,[(c(!0),f(j,null,H(r.recentPosts,a=>(c(),f("li",{key:a.id,class:"py-3"},[h(v(w),{href:s.route("posts.show",a.id),class:"block hover:bg-gray-50 dark:hover:bg-gray-700 -mx-3 px-3 py-2 rounded-md"},{default:x(()=>[e("div",Pe,[e("p",Ue,l(a.title||"Без заголовка"),1),e("p",We,l(n(a.created_at)),1)]),e("p",qe,l(a.content?o(a.content,60):"Нет текста"),1),e("div",Ge,[e("span",{class:Y(["inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",d(a.status)])},l(g(a.status)),3),a.media&&a.media.length>0?(c(),f("span",Je,[t[17]||(t[17]=e("svg",{class:"h-3 w-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),k(" "+l(a.media.length),1)])):C("",!0)])]),_:2},1032,["href"])]))),128))]),e("div",Ke,[h(v(w),{href:s.route("groups.posts",r.group.id),class:"text-sm text-indigo-600 hover:text-indigo-500 dark:text-indigo-400 dark:hover:text-indigo-300"},{default:x(()=>t[18]||(t[18]=[k(" Смотреть все посты ")])),_:1},8,["href"])])])):(c(),f("div",Qe,t[19]||(t[19]=[e("p",null,"Нет постов в этой группе",-1)])))])])])])])])]),_:1})],64))}};export{rt as default};
